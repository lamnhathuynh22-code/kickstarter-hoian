<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Booking ‚Äì Kickstarter Hoian</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=Montserrat:wght@500;600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <meta name="description" content="Kickstarter Hoian - Booking cultural tours with local youth guides." />
  <style>
    :root{
      --accent: #ff6a3d;
      --bg-beige: #f7f3e6;
      --card-bg: #fbf7ea;
      --muted: #6b5b45;
    }
    body {
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background:var(--bg-beige);
      color:#2b2b2b;
    }
    h2.section-title {
      font-family: "Playfair Display", serif;
      font-weight: 700;
      color: #28b684;
      text-align: center;
      letter-spacing: 1px;
    }
  </style>
</head>
<body>
    
 <header class="fixed w-full top-0 z-50 bg-white/60 backdrop-blur-sm border-b">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <a href="../index.html" class="flex items-center gap-3">
        <img src="../images/Logo.png" alt="Kickstarter Hoian" class="h-10 w-auto" onerror="this.style.display='none'">
        <span class="text-base md:text-2xl font-bold site-title">
          Kick<span class="text-[#28b684]">starter</span> Hoian
        </span>
      </a>

      <!-- Desktop Nav -->
      <nav class="hidden md:flex items-center gap-8">
        <a href="../index.html" class="text-black font-medium hover:text-orange-600">Home</a>
        <a href="../pages/about.html" class="text-black font-medium hover:text-orange-600">About Us</a>

        <!-- Dropdown Youth Hoian Tours -->
        <div class="relative group">
          <button class="flex items-center text-black font-medium hover:text-orange-600 focus:outline-none">
            Youth Hoian Tours
            <svg class="ml-1 w-4 h-4 transform group-hover:rotate-180 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
            </svg>
          </button>

          <!-- Dropdown box -->
          <div class="absolute left-0 mt-2 w-48 bg-white shadow-lg rounded-md opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all duration-200 z-50">
            <a href="/pages/art.html" class="block px-4 py-2 hover:bg-gray-100">Art Hoian</a>
            <a href="/pages/taste.html" class="block px-4 py-2 hover:bg-gray-100">Taste Hoian</a>
            <a href="/pages/touch.html" class="block px-4 py-2 hover:bg-gray-100">Touch Hoian</a>
          </div>
        </div>

        <a href="/pages/booking.html"
          class="text-white font-semibold bg-[#28b684] px-5 py-2 rounded-lg shadow-md hover:bg-green-700 transition">
          Book Now
        </a>
      </nav>

      <!-- mobile menu button -->
      <div class="md:hidden">
        <button id="mobile-btn" class="p-2 rounded-md border border-gray-200" aria-label="Open menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile Nav -->
    <div id="mobile-nav" class="md:hidden hidden pb-4">
      <a href="/index.html" class="block py-2 text-black font-medium hover:text-orange-600">Home</a>
      <a href="/pages/about.html" class="block py-2 text-black font-medium hover:text-orange-600">About Us</a>

      <!-- Dropdown trong mobile -->
      <div class="border-t border-gray-200 mt-2 pt-2">
        <button id="mobile-dropdown-btn" class="w-full flex justify-between items-center py-2 text-black font-medium hover:text-orange-600 focus:outline-none">
          Youth Hoian Tours
          <svg id="mobile-dropdown-icon" class="w-4 h-4 transform transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
          </svg>
        </button>
        <div id="mobile-dropdown" class="hidden pl-4">
          <a href="/pages/art.html" class="block py-1 text-gray-700 hover:text-orange-600">Art Hoian</a>
          <a href="/pages/taste.html" class="block py-1 text-gray-700 hover:text-orange-600">Taste Hoian</a>
          <a href="/pages/touch.html" class="block py-1 text-gray-700 hover:text-orange-600">Touch Hoian</a>
        </div>
      </div>

      <a href="/pages/booking.html"
        class="block py-2 text-center font-semibold text-white bg-[#28b684] rounded-lg mt-3 hover:bg-green-700 transition">
        Book Now
      </a>
    </div>
  </div>
</header>

<!-- Script -->
<script>
  const mobileBtn = document.getElementById('mobile-btn');
  const mobileNav = document.getElementById('mobile-nav');
  const dropdownBtn = document.getElementById('mobile-dropdown-btn');
  const dropdown = document.getElementById('mobile-dropdown');
  const dropdownIcon = document.getElementById('mobile-dropdown-icon');

  mobileBtn.addEventListener('click', () => {
    mobileNav.classList.toggle('hidden');
  });

  dropdownBtn.addEventListener('click', () => {
    dropdown.classList.toggle('hidden');
    dropdownIcon.classList.toggle('rotate-180');
  });
</script>

<main class="pt-16">

<!-- HERO -->
<section class="pt-24 pb-12 text-center">
  <h1 class="text-3xl md:text-5xl font-bold text-[#28b684] mb-4">
    Book Your Experience
  </h1>
  <p class="text-gray-600 text-lg">
    Fill out the form below to reserve your spot with our local youth guides.
  </p>
</section>

<!-- BOOKING FORM -->
<section class="max-w-3xl mx-auto px-6 pb-20">
  <form id="bookingForm" class="bg-white rounded-2xl shadow-lg p-8 space-y-6" novalidate>
    <!-- Full Name -->
    <div>
      <label class="block text-sm font-semibold text-gray-700">
        Full Name <span class="text-red-500">*</span>
      </label>
      <input
        type="text"
        name="name"
        required
        class="mt-2 w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#28b684] focus:outline-none"
      />
    </div>

    <!-- Email + Phone -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-semibold text-gray-700">
          Email <span class="text-red-500">*</span>
        </label>
        <input
          type="email"
          name="email"
          required
          class="mt-2 w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#28b684] focus:outline-none"
        />
      </div>
      <div>
        <label class="block text-sm font-semibold text-gray-700">
          Phone <span class="text-red-500">*</span>
        </label>
        <input
          type="tel"
          name="phone"
          required
          class="mt-2 w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#28b684] focus:outline-none"
        />
      </div>
    </div>

    <!-- Tour -->
    <div>
      <label class="block text-sm font-semibold text-gray-700">
        Select Tour <span class="text-red-500">*</span>
      </label>
      <select
        id="tourSelect"
        name="tour"
        required
        class="mt-2 w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#28b684] focus:outline-none"
      >
        <option value="">-- Choose a tour --</option>
        <option value="Art Hoian">Art Hoian</option>
        <option value="Taste Hoian">Taste Hoian</option>
        <option value="Touch Hoian">Touch Hoian</option>
      </select>
    </div>

    <!-- Route -->
    <div>
      <label class="block text-sm font-semibold text-gray-700">
        Select Route <span class="text-red-500">*</span>
      </label>
      <select
        id="routeSelect"
        name="route"
        required
        disabled
        class="mt-2 w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#28b684] focus:outline-none"
      >
        <option value="">-- Choose a route --</option>
      </select>
      <p id="routeHelp" class="mt-1 text-xs text-gray-500">Please choose a tour first.</p>
    </div>

    <!-- Date + Guests -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-semibold text-gray-700">
          Date <span class="text-red-500">*</span>
        </label>
        <input
          id="dateInput"
          type="date"
          name="date"
          required
          class="mt-2 w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#28b684] focus:outline-none"
        />
      </div>
      <div>
        <label class="block text-sm font-semibold text-gray-700">
          Number of Guests <span class="text-red-500">*</span>
        </label>
        <input
          type="number"
          name="guests"
          min="1"
          value="1"
          required
          class="mt-2 w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#28b684] focus:outline-none"
        />
      </div>
    </div>

    <!-- Notes -->
    <div>
      <label class="block text-sm font-semibold text-gray-700">Notes</label>
      <textarea
        name="notes"
        rows="4"
        class="mt-2 w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#28b684] focus:outline-none"
        placeholder="Let us know if you have any preferences or special notes ‚Äî e.g. transportation choice (bicycle, motorbike, or car), children joining the trip, dietary requirements, preferred departure time, or pick-up location.">
      </textarea>
    </div>

    <!-- Cloudflare Turnstile -->
    <div class="pt-2">
      <div class="cf-turnstile" data-sitekey="0x4AAAAAAB7WDqz1K7-gyNRc" data-theme="auto"></div>
      <p class="text-xs text-gray-500 mt-2">Protected by Cloudflare Turnstile.</p>
    </div>

    <button
      type="submit"
      class="w-full bg-[#28b684] text-white font-semibold py-3 rounded-lg hover:bg-green-700 transition"
    >
      Submit Booking
    </button>
  </form>

  <!-- Booking Note -->
  <div class="mt-6 bg-[#fff3cd] border border-[#ffeeba] text-[#856404] rounded-lg px-4 py-3 text-sm md:text-base">
    <strong>Note:</strong> Your bookings must be submitted at least
    <span class="font-semibold">5 days in advance</span>.<br />
    In case of urgent requests (less than 5 days prior to your tour dates), please kindly contact us
    via
    <a href="mailto:kickstarterhoian@gmail.com" class="underline hover:text-[#28b684]">kickstarterhoian@gmail.com</a>
    or WhatsApp at
    <a href="https://wa.me/84935867412" target="_blank" class="underline hover:text-[#28b684]">(+84 935 867 412)</a>.
  </div>
</section>

<!-- SUCCESS POPUP -->
<div id="successModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
  <div class="bg-white rounded-2xl shadow-xl p-8 max-w-sm text-center">
    <h3 class="text-2xl font-bold text-[#28b684] mb-3">Booking Submitted!</h3>
    <p class="text-gray-700 mb-6">
      Thank you for your booking. Our team will contact you via WhatsApp or email within
      <strong>24 hours</strong> to confirm your booking details and answer any questions you may have.
    </p>
    <button
      id="closeModal"
      class="px-6 py-2 bg-[#28b684] text-white rounded-lg font-semibold hover:bg-green-700 transition"
    >
      OK
    </button>
  </div>
</div>

<!-- Cloudflare Turnstile Script -->
<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

<script>
  // === CONFIG ===
  const WEBAPP_URL = 'https://script.google.com/macros/s/AKfycbzc28y3jWQY2sIw24wfHpnIf57aIobmcBO6xja2o-Nr6IWDLtlkAKSK7UwpJydsfnVYHA/exec';

  const ROUTES = {
    "Art Hoian": [
      "Route 1 ‚Äî A Living Museum of Craftsmanship ‚Äî Cycling to Kim B·ªìng & Tr√† Nhi√™u",
      "Route 2 ‚Äî The Art of Everyday Life ‚Äî Cycling to Thanh H√† & Tr√† Qu·∫ø",
    ],
    "Taste Hoian": [
      "Route 1 ‚Äî The Hoian Icons of Taste",
      "Route 2 ‚Äî The Hoian Origin Flavors",
    ],
    "Touch Hoian": [
      "Route 1 ‚Äî A Legacy of Civilizations ‚Äî Hoi An Ancient Town",
      "Route 2 ‚Äî Path to Deity ‚Äî My Son Sanctuary",
    ],
  };

  const form = document.getElementById("bookingForm");
  const tourSelect = document.getElementById("tourSelect");
  const routeSelect = document.getElementById("routeSelect");
  const routeHelp = document.getElementById("routeHelp");
  const dateInput = document.getElementById("dateInput");
  const modal = document.getElementById("successModal");
  const closeModal = document.getElementById("closeModal");

  // Disable past dates
  (() => {
    const tzOffset = new Date().getTimezoneOffset() * 60000;
    const todayISO = new Date(Date.now() - tzOffset).toISOString().slice(0, 10);
    dateInput.min = todayISO;
  })();

  // Dynamic route list
  tourSelect.addEventListener("change", () => {
    const selected = tourSelect.value;
    routeSelect.innerHTML = '<option value="">-- Choose a route --</option>';
    if (ROUTES[selected]) {
      ROUTES[selected].forEach(r => {
        const opt = document.createElement("option");
        opt.value = r;
        opt.textContent = r;
        routeSelect.appendChild(opt);
      });
      routeSelect.disabled = false;
      routeHelp.textContent = "Please select a route.";
    } else {
      routeSelect.disabled = true;
      routeHelp.textContent = "Please choose a tour first.";
    }
  });

  // Handle form submit
  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const token = form.querySelector('input[name="cf-turnstile-response"]')?.value;
    if (!token) return alert("Please verify you are human (Turnstile).");
    if (!tourSelect.value || !routeSelect.value) return alert("Please choose both Tour and Route.");
    if (dateInput.value < dateInput.min) return alert("Please choose a valid date.");

    const data = {
      name: form.name.value.trim(),
      email: form.email.value.trim(),
      phone: form.phone.value.trim(),
      tour: form.tour.value,
      route: form.route.value,
      date: form.date.value,
      guests: form.guests.value,
      notes: form.notes.value.trim(),
      "cf-turnstile-response": token
    };

    try {
      const res = await fetch(WEBAPP_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });
      const json = await res.json();

      if (json.ok) {
        modal.classList.remove("hidden");
        form.reset();
        routeSelect.disabled = true;
        if (window.turnstile) turnstile.reset();
      } else {
        alert("Submission failed: " + (json.error || "Unknown error"));
      }
    } catch (err) {
      alert("Network error. Please try again later.");
      console.error(err);
    }
  });

  // Close success popup
  closeModal.addEventListener("click", () => {
    modal.classList.add("hidden");
  });
</script>





<!-- Footer -->
<footer class="bg-white/80 py-8 border-t">
  <div class="max-w-6xl mx-auto px-4 text-center space-y-4">

    <div>
      <p class="text-lg md:text-xl font-semibold text-[#28b684] mb-3">Follow us</p>
      <div class="flex justify-center space-x-6">
        <a href="https://www.facebook.com/profile.php?id=61571256080259" target="_blank" class="text-gray-600 hover:text-[#28b684]">
          <i class="fab fa-facebook-f text-xl"></i>
        </a>
        <a href="https://www.instagram.com/kickstarter_hoian" target="_blank" class="text-gray-600 hover:text-[#28b684]">
          <i class="fab fa-instagram text-xl"></i>
        </a>
        <a href="https://www.tiktok.com/@kickstarterhoian" target="_blank" class="text-gray-600 hover:text-[#28b684]">
          <i class="fab fa-tiktok text-xl"></i>
        </a>
        <a href="#" target="_blank" class="text-gray-600 hover:text-[#28b684]">
          <i class="fab fa-tripadvisor text-xl"></i>
        </a>
      </div>
    </div>

    <!-- B·∫£n quy·ªÅn ƒë·ªÉ xu·ªëng cu·ªëi -->
    <p class="text-sm muted">&copy; 2025 Kickstarter Hoian ‚Äî Supporting local youth & sustainable tourism.</p>

  </div>
</footer>

<!-- Font Awesome -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/js/all.min.js" crossorigin="anonymous"></script>

<!-- ‚úÖ G·ª≠i d·ªØ li·ªáu qua Google Sheets -->
<script>
document.getElementById("bookingForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const form = e.target;
  const data = new FormData(form); 

  const scriptURL = "https://script.google.com/macros/s/AKfycbw1ALZsxBUXDDZCivItLZZfcp3TGVoNfcUnNmh4RfNCPRltKICgsbiVF934B064MnEUDw/exec"; // üîó D√°n link Web App c·ªßa b·∫°n t·∫°i ƒë√¢y

  try {
    const res = await fetch(scriptURL, { method: "POST", body: data });
    if (res.ok) {
      document.getElementById("responseMessage").textContent = "‚úÖ Booking submitted successfully!";
      form.reset();
    } else {
      document.getElementById("responseMessage").textContent = "‚ö†Ô∏è Submission failed.";
    }
  } catch (err) {
    document.getElementById("responseMessage").textContent = "‚ùå Error sending data.";
    console.error(err);
  }
});
</script>

</body>
</html>
